<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Kinky Party 21+</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css?family=Russo+One|Montserrat:400,700&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-red: #5c1818;
      --main-dark: #161014;
      --main-accent: #e9457a;
      --main-accent-hover: #b71e40;
      --main-gray: #e5e3ef;
      --main-btn-red: #a32e2e;
      --main-btn-black: #221217;
      --main-border: 2.5px solid #a32e2e;
      --main-radius: 18px;
      --main-shadow: 0 8px 32px #000a, 0 2px 8px #a32e2e66;
      --main-font: 'Montserrat', Arial, sans-serif;
      --main-title-font: 'Russo One', Arial, sans-serif;
    }
    html, body {
      min-height: 100vh; height: 100%;
      margin: 0; padding: 0;
      width: 100vw;
      background: var(--main-dark);
      font-family: var(--main-font);
      color: var(--main-gray);
      background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=900&q=80');
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      overscroll-behavior-y: contain;
      touch-action: manipulation;
      overflow-x: hidden;
    }
    .header {
      width: 100vw;
      text-align: center;
      font-family: var(--main-title-font);
      font-size: 2em;
      color: #fff;
      letter-spacing: 2.5px;
      padding: 1.2em 0 0.7em 0;
      background: linear-gradient(90deg, #2e0d16 0%, #7a2331 100%);
      border-radius: 0 0 25px 25px;
      text-shadow: 0 8px 30px #000e, 0 1px 2px #fff;
      position: relative;
      z-index: 20;
      user-select: none;
      font-weight: 900;
      border-bottom: 3px solid #a32e2e;
    }
    .header span {
      color: #fff;
      font-weight: 900;
      letter-spacing: 0.04em;
      background: none !important;
      -webkit-background-clip: unset !important;
      -webkit-text-fill-color: unset !important;
    }
    .app-wrap {
      min-height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 0 80px 0;
    }
    .app-main {
      background: rgba(28,15,21,0.99);
      border-radius: var(--main-radius);
      box-shadow: var(--main-shadow);
      padding: 1.4em 1.3em 1.2em 1.3em;
      margin-top: 2em;
      min-width: 320px;
      max-width: 98vw;
      width: 370px;
      display: flex;
      flex-direction: column;
      align-items: center;
      border: var(--main-border);
      position: relative;
    }
    @media (max-width: 500px){
      .app-main {
        padding: 1em 0.2em 1.15em 0.2em;
        margin-top: 1.1em;
        min-width: 98vw;
        width: 98vw;
        border-radius: 0;
      }
      .header {
        font-size: 1.07em;
        padding: 1.15em 0 0.7em 0;
        border-radius: 0 0 18px 18px;
      }
    }
    .big-title {
      font-family: var(--main-title-font);
      font-size: 1.3em;
      color: var(--main-accent);
      margin-bottom: 0.7em;
      text-shadow: 0 1px 12px #7a2331bb, 0 2px 6px #000c;
      letter-spacing: 1.4px;
      text-align: center;
      font-weight: 900;
      text-transform: uppercase;
      margin-top: 0.1em;
    }
    .step-title {
      font-family: var(--main-title-font);
      font-size: 1.09em;
      color: var(--main-gray);
      margin-bottom: 1.2em;
      text-shadow: 0 1px 8px #a32e2e99;
      letter-spacing: 1.3px;
      text-align: center;
      font-weight: 700;
      border-bottom: 2px solid #e9457a;
      padding-bottom: 0.3em;
      margin-top: 0.1em;
      text-transform: none;
    }
    .gender-select {
      display: flex;
      justify-content: center;
      gap: 3vw;
      margin-bottom: 1.8em;
      width: 100%;
      margin-top: 0.2em;
    }
    .gender-btn {
      font-family: var(--main-title-font);
      font-size: 1em;
      padding: 0.49em 1.09em;
      border: 2.2px solid #e9457a;
      border-radius: 13px;
      font-weight: 900;
      cursor: pointer;
      box-shadow: 0 3px 12px #0007;
      outline: none;
      transition: background .14s, color .13s, box-shadow .13s, border .13s;
      color: #fff;
      background: #2e0d16;
      opacity: 0.89;
      margin: 0 0.06em;
      display: flex;
      align-items: center;
      gap: 0.45em;
      min-width: 75px;
      min-height: 40px;
    }
    .gender-btn.selected,
    .gender-btn:active {
      opacity: 1;
      background: var(--main-accent);
      border: 2.2px solid #fff;
      color: #fff;
      box-shadow: 0 2px 8px #e9457a77;
    }
    .gender-icon {
      font-size: 1.5em;
      margin-bottom: 0;
      display: block;
      text-align: center;
    }
    .ticket-selection {
      width: 100%;
      margin-bottom: 2.2em;
      display: flex;
      flex-direction: column;
      gap: 1.4em;
    }
    .ticket-row {
      background: #2e0d16ef;
      border-radius: 14px;
      margin: 0.3em 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1.05em 0.5em 0.6em 0.5em;
      min-width: 0;
      box-shadow: 0 2px 13px #e9457a44;
      border: 1.5px solid #e9457a;
    }
    .ticket-type {
      font-family: var(--main-title-font);
      color: var(--main-accent);
      font-size: 1.09em;
      margin-bottom: 0.19em;
      letter-spacing: 1.3px;
      font-weight: 800;
    }
    .ticket-desc {
      color: #fff;
      font-size: 0.97em;
      text-shadow: 0 0px 4px #e9457a33;
      margin-bottom: 0.2em;
      font-family: var(--main-font);
      font-weight: 500;
      text-align: center;
    }
    .ticket-btns {
      display: flex;
      gap: 1em;
      align-items: center;
      margin: 0.6em 0 0.3em 0;
      justify-content: center;
    }
    .ticket-btn {
      font-size: 1.07em;
      font-family: var(--main-title-font);
      background: var(--main-accent);
      color: #fff;
      border-radius: 10px;
      border: 2px solid #fff;
      padding: 0.13em 0.9em;
      font-weight: 900;
      margin: 0 0.09em;
      outline: none;
      box-shadow: 0 2px 9px #e9457a33;
      cursor: pointer;
      transition: background .13s, color .12s, border .13s;
    }
    .ticket-btn:active {
      background: #fff;
      color: var(--main-accent);
      border-color: var(--main-accent);
    }
    .ticket-count {
      min-width: 2.2em;
      display: inline-block;
      font-size: 1.15em;
      font-family: var(--main-title-font);
      color: var(--main-accent);
      letter-spacing: 1px;
      text-align: center;
      font-weight: bold;
    }
    .total-price-row {
      width: 100%;
      margin-top: 0.8em;
      margin-bottom: 0.5em;
      text-align: center;
      font-family: var(--main-title-font);
      font-size: 1.11em;
      color: var(--main-accent);
      letter-spacing: 1.1px;
      text-shadow: 0 1px 7px #e9457a99;
      background: #2e0d16e9;
      padding: 0.7em 0;
      border-radius: 12px;
      box-shadow: 0 2px 10px #e9457a11;
      border: 1.5px solid var(--main-accent);
      font-weight: 900;
      margin-bottom: 1.2em;
    }
    .buy-btn {
      width: 100%;
      font-size: 1.11em;
      font-family: var(--main-title-font);
      background: var(--main-accent);
      color: #fff;
      border-radius: 13px;
      border: 2.3px solid #fff;
      padding: 1em 0;
      font-weight: 900;
      margin-top: 1.1em;
      outline: none;
      box-shadow: 0 2px 18px #e9457a44, 0 2px 10px #fff2;
      cursor: pointer;
      transition: filter .13s, background .18s, color .13s, border .13s;
      letter-spacing: 1.2px;
      display: block;
    }
    .buy-btn:active {
      filter: brightness(0.97);
      background: #fff;
      color: var(--main-accent);
      border-color: var(--main-accent);
    }
    .gender-hint {
      color: #fff;
      font-size: 0.93em;
      margin-bottom: 0.7em;
      font-family: var(--main-font);
      letter-spacing: 0.2px;
      font-weight: 500;
      text-align: center;
      margin-top: 0.6em;
    }
    .fadein {
      animation: fadein .60s;
    }
    @keyframes fadein {
      0%{opacity:0;transform:translateY(24px);}
      100%{opacity:1;transform:translateY(0);}
    }
    .qr-preview {
      margin: 1.2em 0 0.25em 0;
      text-align: center;
    }
    .qr-img {
      width: 120px;
      height:120px;
      display: block;
      margin: 0 auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 16px #000a;
      object-fit: contain;
      border:2px solid var(--main-accent);
    }
    .success-msg, .pay-msg {
      color: var(--main-accent);
      font-size: 1.13em;
      font-family: var(--main-title-font);
      font-weight: 900;
      margin: 1.1em 0 0.7em 0;
      text-align: center;
      letter-spacing: 1.1px;
    }
    .pay-amount {
      color: #fff;
      background: var(--main-accent);
      border-radius: 8px;
      font-size: 1.13em;
      font-family: var(--main-title-font);
      font-weight: 900;
      margin: 1.1em auto 1.2em auto;
      padding: 0.6em 0.7em;
      max-width: 150px;
      letter-spacing: 1.2px;
      border: 2px solid #fff;
      box-shadow: 0 2px 10px #e9457a33;
      text-align: center;
      user-select: all;
      display: inline-block;
    }
    .zelle-row {
      background: #2e0d16e9;
      color: #fff;
      border-radius: 9px;
      padding: 0.45em 0.7em;
      margin: 1.2em 0 0.7em 0;
      font-family: var(--main-title-font);
      font-size: 1.02em;
      border: 1.5px solid var(--main-accent);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8em;
      user-select: all;
      position: relative;
      max-width: 99vw;
      flex-wrap: wrap;
    }
    .zelle-addr {
      font-family: monospace;
      color: #fff;
      background: #1a1116;
      padding: 0.13em 0.42em;
      border-radius: 6px;
      font-size: 0.98em;
      letter-spacing: 0.5px;
      user-select: all;
      margin-right: 0.2em;
      max-width: 125px;
      overflow-x: auto;
      white-space: nowrap;
      display: inline-block;
    }
    .copy-btn {
      background: var(--main-accent);
      color: #fff;
      font-family: var(--main-title-font);
      font-size: 0.98em;
      border: none;
      border-radius: 6px;
      padding: 0.14em 0.65em;
      cursor: pointer;
      font-weight: 800;
      transition: background .13s, color .12s, opacity .12s;
      outline: none;
      margin-left: 0.1em;
    }
    .copy-btn:active {
      background: #fff;
      color: var(--main-accent);
      opacity: 0.7;
    }
    .app-footer {
      position: fixed;
      bottom: 0; left: 0; width: 100vw;
      background: rgba(36,14,20,0.93);
      color: #fff;
      text-align: center;
      font-size: 1.08em;
      font-family: var(--main-title-font);
      letter-spacing: 0.8px;
      padding: 0.58em 0 0.52em 0;
      z-index: 999;
      box-shadow: 0 -3px 12px #0004;
      user-select: none;
      font-weight: 600;
      border-top: 2px solid var(--main-accent);
    }
  </style>
</head>
<body>
  <div class="header"><span>Kinky Party 21+</span></div>
  <div class="app-wrap">
    <div class="app-main" id="main-step"></div>
  </div>
  <div class="app-footer">
    Только для лиц 21+
  </div>
  <script>
    let gender = null; // "male" | "female"
    let tickets = { fun: 0, vip: 0 };
    let prices = {
      male: { fun: 200, vip: 400 },
      female: { fun: 100, vip: 200 }
    };

    function renderGenderSelect() {
      document.getElementById('main-step').innerHTML = `
        <div class="big-title fadein">Приобрести QR билет</div>
        <div class="step-title fadein" style="margin-bottom:1.3em;">выберите ваш пол</div>
        <div class="gender-select fadein">
          <button class="gender-btn male${gender==='male'?' selected':''}" onclick="selectGender('male')">
            <span class="gender-icon">👨</span>Парень
          </button>
          <button class="gender-btn female${gender==='female'?' selected':''}" onclick="selectGender('female')">
            <span class="gender-icon">👩</span>Девушка
          </button>
        </div>
        <div class="gender-hint fadein">Вы на шаг впереди к незабываемой секс ночи которая пройдет в Chicago</div>
      `;
    }
    function selectGender(g) {
      gender = g;
      tickets = { fun: 0, vip: 0 };
      renderTicketSelection();
    }
    function renderTicketSelection() {
      let priceFun = prices[gender].fun;
      let priceVip = prices[gender].vip;
      document.getElementById('main-step').innerHTML = `
        <div class="big-title fadein">Приобрести QR билет</div>
        <div class="step-title fadein" style="margin-bottom:1.3em;">выберите билет</div>
        <div class="ticket-selection fadein">
          <div class="ticket-row">
            <div class="ticket-type">QR FUN</div>
            <div class="ticket-desc">Обычный билет на вечеринку</div>
            <div class="ticket-btns">
              <button class="ticket-btn" onclick="changeTicket('fun', -1)">-</button>
              <span class="ticket-count" id="fun-count">${tickets.fun}</span>
              <button class="ticket-btn" onclick="changeTicket('fun', 1)">+</button>
            </div>
            <div style="color:var(--main-accent);margin-top:0.3em;font-family:'Montserrat',sans-serif;">${priceFun}$</div>
          </div>
          <div class="ticket-row">
            <div class="ticket-type">QR VIP</div>
            <div class="ticket-desc">VIP билет: приоритет, отдельная зона</div>
            <div class="ticket-btns">
              <button class="ticket-btn" onclick="changeTicket('vip', -1)">-</button>
              <span class="ticket-count" id="vip-count">${tickets.vip}</span>
              <button class="ticket-btn" onclick="changeTicket('vip', 1)">+</button>
            </div>
            <div style="color:var(--main-accent);margin-top:0.3em;font-family:'Montserrat',sans-serif;">${priceVip}$</div>
          </div>
        </div>
        <div class="total-price-row fadein">
          Итого: <span id="total-price">${getTotalPrice()}$</span>
        </div>
        <button class="buy-btn fadein" onclick="showPayment()" id="to-pay-btn"
            ${getTotalPrice()===0?'disabled style="opacity:0.55;filter:grayscale(1);cursor:not-allowed;"':''}>
          Оформить QR билет
        </button>
        <button class="buy-btn fadein" style="margin-top:0.7em;background:#2e0d16;color:var(--main-accent);border:2px solid var(--main-accent);" onclick="renderGenderSelect()">
          ← Назад
        </button>
      `;
    }
    function changeTicket(type, delta) {
      tickets[type] += delta;
      if(tickets[type]<0) tickets[type]=0;
      document.getElementById(type+'-count').textContent = tickets[type];
      document.getElementById('total-price').textContent = getTotalPrice()+'$';
      let btn = document.getElementById('to-pay-btn');
      if (getTotalPrice()===0) {
        btn.disabled = true;
        btn.style.opacity = 0.55;
        btn.style.filter = "grayscale(1)";
        btn.style.cursor = "not-allowed";
      } else {
        btn.disabled = false;
        btn.style.opacity = 1;
        btn.style.filter = "none";
        btn.style.cursor = "pointer";
      }
    }
    function getTotalPrice() {
      if (!gender) return 0;
      return tickets.fun * prices[gender].fun + tickets.vip * prices[gender].vip;
    }
    function getTotalTickets() {
      return tickets.fun + tickets.vip;
    }
    function showPayment() {
      let sum = getTotalPrice();
      let count = getTotalTickets();
      document.getElementById('main-step').innerHTML = `
        <div class="big-title fadein" style="margin-bottom:0.8em;">Оплата QR билета</div>
        <div class="zelle-row fadein" style="justify-content:left;">
          <span style="font-size:1em;">ZELLE:</span> 
          <span class="zelle-addr" id="zelle-copy">klubnika@mail.ru</span>
          <button class="copy-btn" onclick="copyZelle()">Скопировать</button>
        </div>
        <div class="pay-msg fadein" style="margin-top:0.8em;">Оплатите на ZELLE такую сумму для получения ${count} ${getLabel(count)}:</div>
        <div class="pay-amount fadein">${sum}$</div>
        <div class="gender-hint fadein" style="margin-top:1.15em;">
          После того как оплатите $ на zelle нажмите кнопку Оплата завершена, после вы сразу получите ${count} ${getLabel(count)}
        </div>
        <button class="buy-btn fadein" style="margin-top:1.1em;" onclick="showTicketResult()">
          Оплата завершена
        </button>
        <button class="buy-btn fadein" style="margin-top:0.7em;background:#2e0d16;color:var(--main-accent);border:2px solid var(--main-accent);" onclick="renderGenderSelect()">
          ← Назад
        </button>
      `;
    }
    function getLabel(count) {
      if (count === 1) return "билет";
      if (count > 1 && count < 5) return "билета";
      return "билетов";
    }
    function copyZelle() {
      const mail = "klubnika@mail.ru";
      if (navigator?.clipboard) {
        navigator.clipboard.writeText(mail);
      }
      const btn = event.target;
      btn.textContent = "Скопировано!";
      btn.style.background = "#fff";
      btn.style.color = "var(--main-accent)";
      setTimeout(() => {
        btn.textContent = "Скопировать";
        btn.style.background = "var(--main-accent)";
        btn.style.color = "#fff";
      }, 1200);
    }
    function showTicketResult() {
      let count = getTotalTickets();
      let funCount = tickets.fun, vipCount = tickets.vip;
      let funBlock = funCount > 0 ? `<div class="ticket-row" style="margin-top:1.3em;">
        <div class="ticket-type">QR FUN</div>
        <div class="ticket-desc">x${funCount}</div>
      </div>` : '';
      let vipBlock = vipCount > 0 ? `<div class="ticket-row" style="margin-top:1.3em;">
        <div class="ticket-type">QR VIP</div>
        <div class="ticket-desc">x${vipCount}</div>
      </div>` : '';
      document.getElementById('main-step').innerHTML = `
        <div class="big-title fadein" style="margin-bottom:0.8em;">Ваши билеты</div>
        <div class="success-msg fadein" style="color:#fff;margin-bottom:1.2em;">
          Покажите это сообщение на входе<br>
          <span style="font-size:1.3em;color:var(--main-accent);font-family:var(--main-title-font);">
            ${funCount > 0 ? 'FUN x'+funCount : ''} ${vipCount > 0 ? 'VIP x'+vipCount : ''}
          </span>
        </div>
        ${funBlock}${vipBlock}
        <button class="buy-btn fadein" style="margin-top:2.2em;" onclick="renderGenderSelect()">
          Купить ещё билет
        </button>
      `;
    }
    // Initial render
    renderGenderSelect();
    // For mobile: scroll to form on reload
    window.onload = () => {
      setTimeout(()=>{ 
        document.getElementById('main-step').scrollIntoView({behavior: "smooth", block: "start"});
      }, 80);
    };
    document.addEventListener('submit', e=>e.preventDefault());
  </script>
</body>
</html>
