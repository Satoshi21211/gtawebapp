<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Kinky Party 21+</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css?family=Russo+One|Montserrat:400,700&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-yellow: #ffe600;
      --main-pink: #ff36a3;
      --main-bg: #19181d;
      --main-btn-bg: linear-gradient(90deg, #ffe600 75%, #ff36a3 100%);
      --main-btn-bg-f: linear-gradient(90deg, #ff36a3 40%, #ffe600 100%);
      --main-btn-female: linear-gradient(90deg, #fff2b0 60%, #ffbde6 100%);
      --main-btn-male: linear-gradient(90deg, #ffe600 60%, #b0d9ff 100%);
      --main-border: 2.5px solid #ffe600;
      --main-radius: 20px;
      --main-shadow: 0 8px 32px #000a, 0 2px 8px #ffe60033;
      --main-font: 'Montserrat', Arial, sans-serif;
      --main-title-font: 'Russo One', Arial, sans-serif;
    }
    html, body {
      min-height: 100vh; height: 100%;
      margin: 0; padding: 0;
      width: 100vw;
      background: var(--main-bg);
      font-family: var(--main-font);
      color: #fff;
      background-image: url('https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80');
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      overscroll-behavior-y: contain;
      touch-action: manipulation;
      overflow-x: hidden;
    }
    .header {
      width: 100vw;
      text-align: center;
      font-family: var(--main-title-font);
      font-size: 2.1em;
      color: var(--main-yellow);
      letter-spacing: 2.5px;
      padding: 1.1em 0 0.8em 0;
      background: rgba(30, 18, 40, 0.97);
      border-radius: 0 0 25px 25px;
      text-shadow: 0 6px 32px #000e, 0 1px 2px #fff8;
      position: relative;
      z-index: 20;
      user-select: none;
      font-weight: 900;
    }
    .app-wrap {
      min-height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 0 80px 0;
    }
    .app-main {
      background: rgba(22,22,28,0.96);
      border-radius: var(--main-radius);
      box-shadow: var(--main-shadow);
      padding: 1.4em 1.3em 1.2em 1.3em;
      margin-top: 2em;
      min-width: 320px;
      max-width: 98vw;
      width: 370px;
      display: flex;
      flex-direction: column;
      align-items: center;
      border: var(--main-border);
      position: relative;
    }
    @media (max-width: 500px){
      .app-main {
        padding: 1em 0.2em 1.15em 0.2em;
        margin-top: 1.1em;
        min-width: 98vw;
        width: 98vw;
        border-radius: 0;
      }
      .header {
        font-size: 1.19em;
        padding: 1.15em 0 0.7em 0;
        border-radius: 0 0 18px 18px;
      }
    }
    .step-title {
      font-family: var(--main-title-font);
      font-size: 1.33em;
      color: var(--main-yellow);
      margin-bottom: 1em;
      text-shadow: 0 1px 8px #000c;
      letter-spacing: 1.2px;
      text-align: center;
      font-weight: 800;
    }
    .gender-select {
      display: flex;
      justify-content: center;
      gap: 2.5vw;
      margin-bottom: 2.3em;
      width: 100%;
      margin-top: 0.5em;
    }
    .gender-btn {
      font-family: var(--main-title-font);
      font-size: 1.25em;
      padding: 1.2em 2.2em;
      border: none;
      border-radius: 18px;
      font-weight: 900;
      cursor: pointer;
      box-shadow: 0 5px 16px #0008;
      outline: none;
      transition: background .17s, color .15s, box-shadow .14s, border .13s;
      border: var(--main-border);
      color: #19181d;
      background: var(--main-btn-bg);
      opacity: 0.79;
    }
    .gender-btn.selected,
    .gender-btn:active {
      opacity: 1;
      color: #1d1d1d;
      background: var(--main-btn-female);
      border: 2.5px solid #ff36a3;
    }
    .gender-btn.male.selected,
    .gender-btn.male:active {
      background: var(--main-btn-male);
      border: 2.5px solid #36b6ff;
    }
    .gender-btn.female.selected,
    .gender-btn.female:active {
      background: var(--main-btn-female);
      border: 2.5px solid #ff36a3;
    }
    .gender-icon {
      font-size: 2.3em;
      margin-bottom: 0.15em;
      display: block;
      text-align: center;
    }
    .ticket-selection {
      width: 100%;
      margin-bottom: 2.5em;
      display: flex;
      flex-direction: column;
      gap: 1.8em;
    }
    .ticket-row {
      background: #241930e9;
      border-radius: 16px;
      margin: 0.3em 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1.1em 0.5em 0.7em 0.5em;
      min-width: 0;
      box-shadow: 0 2px 16px #0007;
      border: 1.7px solid #ffe60050;
    }
    .ticket-type {
      font-family: var(--main-title-font);
      color: #ffe600;
      font-size: 1.18em;
      margin-bottom: 0.2em;
      letter-spacing: 1.5px;
      font-weight: 900;
    }
    .ticket-desc {
      color: #eebcfb;
      font-size: 0.98em;
      text-shadow: 0 0px 4px #ff36a355;
      margin-bottom: 0.2em;
      letter-spacing: 0.2px;
      font-family: var(--main-font);
      font-weight: 600;
    }
    .ticket-btns {
      display: flex;
      gap: 1em;
      align-items: center;
      margin: 0.6em 0 0.3em 0;
      justify-content: center;
    }
    .ticket-btn {
      font-size: 1.17em;
      font-family: var(--main-title-font);
      background: var(--main-btn-bg-f);
      color: #1d1d1d;
      border-radius: 12px;
      border: 2.2px solid #ff36a3;
      padding: 0.29em 1.25em;
      font-weight: 900;
      margin: 0 0.16em;
      outline: none;
      box-shadow: 0 2px 9px #ff36a333;
      cursor: pointer;
      transition: background .12s, color .12s, border .13s;
    }
    .ticket-btn:active {
      background: #ffe600;
      color: #ff36a3;
      border-color: #ffe600;
    }
    .ticket-count {
      min-width: 2.2em;
      display: inline-block;
      font-size: 1.2em;
      font-family: var(--main-title-font);
      color: #ffe600;
      letter-spacing: 1.1px;
      text-align: center;
      font-weight: bold;
    }
    .total-price-row {
      width: 100%;
      margin-top: 1.3em;
      margin-bottom: 0.5em;
      text-align: center;
      font-family: var(--main-title-font);
      font-size: 1.22em;
      color: #ffe600;
      letter-spacing: 1.2px;
      text-shadow: 0 1px 7px #000b;
      background: #23232bde;
      padding: 0.8em 0;
      border-radius: 15px;
      box-shadow: 0 2px 10px #ffe6001a;
      border: 1.5px solid #ff36a3;
      font-weight: 900;
    }
    .buy-btn {
      width: 100%;
      font-size: 1.15em;
      font-family: var(--main-title-font);
      background: var(--main-btn-bg-f);
      color: #19181d;
      border-radius: 14px;
      border: 2.5px solid #ffe600;
      padding: 1.1em 0;
      font-weight: 900;
      margin-top: 1.4em;
      outline: none;
      box-shadow: 0 2px 18px #ff36a355, 0 2px 10px #ffe60020;
      cursor: pointer;
      transition: filter .13s, background .18s, color .13s, border .13s;
      letter-spacing: 1.3px;
    }
    .buy-btn:active {
      filter: brightness(0.97);
      background: #ffe600;
      color: #ff36a3;
      border-color: #ff36a3;
    }
    .gender-hint {
      color: #ffe600;
      font-size: 1.01em;
      margin-bottom: 0.9em;
      font-family: var(--main-font);
      letter-spacing: 0.3px;
      font-weight: 600;
      text-align: center;
    }
    .fadein {
      animation: fadein .60s;
    }
    @keyframes fadein {
      0%{opacity:0;transform:translateY(24px);}
      100%{opacity:1;transform:translateY(0);}
    }
    .qr-preview {
      margin: 1.5em 0 0.3em 0;
      text-align: center;
    }
    .qr-img {
      width: 170px;
      height:170px;
      display: block;
      margin: 0 auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 18px #000a;
      object-fit: contain;
    }
    .success-msg {
      color: #29ff35;
      font-size: 1.21em;
      font-family: var(--main-title-font);
      font-weight: 900;
      margin: 1.1em 0 0.7em 0;
      text-align: center;
      letter-spacing: 1.2px;
    }
    .app-footer {
      position: fixed;
      bottom: 0; left: 0; width: 100vw;
      background: rgba(20,20,22,0.88);
      color: #ffe600;
      text-align: center;
      font-size: 1.1em;
      font-family: var(--main-title-font);
      letter-spacing: 0.8px;
      padding: 0.65em 0 0.7em 0;
      z-index: 999;
      box-shadow: 0 -3px 12px #0004;
      user-select: none;
      font-weight: 600;
      border-top: 2.5px solid #ffe60044;
    }
  </style>
</head>
<body>
  <div class="header">Kinky Party 21+</div>
  <div class="app-wrap">
    <div class="app-main" id="main-step">
      <!-- JS content -->
    </div>
  </div>
  <div class="app-footer">
    <span>–¢–æ–ª—å–∫–æ –¥–ª—è –ª–∏—Ü 21+ | –ë–∏–ª–µ—Ç—ã —Å—Ç—Ä–æ–≥–æ –ø–æ QR</span>
  </div>
  <script>
    let gender = null; // "male" | "female"
    let tickets = { fun: 0, vip: 0 };
    let prices = {
      male: { fun: 200, vip: 400 },
      female: { fun: 100, vip: 200 }
    };
    function renderGenderSelect() {
      document.getElementById('main-step').innerHTML = `
        <div class="step-title fadein">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø–æ–ª</div>
        <div class="gender-select fadein">
          <button class="gender-btn male${gender==='male'?' selected':''}" onclick="selectGender('male')">
            <span class="gender-icon">üë®</span>–ü–∞—Ä–µ–Ω—å
          </button>
          <button class="gender-btn female${gender==='female'?' selected':''}" onclick="selectGender('female')">
            <span class="gender-icon">üë©</span>–î–µ–≤—É—à–∫–∞
          </button>
        </div>
        <div class="gender-hint fadein">–¶–µ–Ω—ã –Ω–∞ –±–∏–ª–µ—Ç—ã –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –¥–ª—è –ø–∞—Ä–Ω–µ–π –∏ –¥–µ–≤—É—à–µ–∫</div>
        <div style="margin-top:1.5em;"></div>
      `;
    }
    function selectGender(g) {
      gender = g;
      tickets = { fun: 0, vip: 0 };
      renderTicketSelection();
    }
    function renderTicketSelection() {
      let priceFun = prices[gender].fun;
      let priceVip = prices[gender].vip;
      document.getElementById('main-step').innerHTML = `
        <div class="step-title fadein">–í—ã–±–µ—Ä–∏—Ç–µ –±–∏–ª–µ—Ç</div>
        <div class="ticket-selection fadein">
          <div class="ticket-row">
            <div class="ticket-type">QR FUN</div>
            <div class="ticket-desc">–û–±—ã—á–Ω—ã–π –±–∏–ª–µ—Ç –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫—É</div>
            <div class="ticket-btns">
              <button class="ticket-btn" onclick="changeTicket('fun', -1)">-</button>
              <span class="ticket-count" id="fun-count">${tickets.fun}</span>
              <button class="ticket-btn" onclick="changeTicket('fun', 1)">+</button>
            </div>
            <div style="color:#ffe600;margin-top:0.3em;font-family:'Montserrat',sans-serif;">${priceFun}$</div>
          </div>
          <div class="ticket-row">
            <div class="ticket-type">QR VIP</div>
            <div class="ticket-desc">VIP –±–∏–ª–µ—Ç: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–æ–Ω–∞</div>
            <div class="ticket-btns">
              <button class="ticket-btn" onclick="changeTicket('vip', -1)">-</button>
              <span class="ticket-count" id="vip-count">${tickets.vip}</span>
              <button class="ticket-btn" onclick="changeTicket('vip', 1)">+</button>
            </div>
            <div style="color:#ffe600;margin-top:0.3em;font-family:'Montserrat',sans-serif;">${priceVip}$</div>
          </div>
        </div>
        <div class="total-price-row fadein">
          –ò—Ç–æ–≥–æ: <span id="total-price">${getTotalPrice()}$</span>
        </div>
        <button class="buy-btn fadein" onclick="showSuccess()" id="to-pay-btn"
            ${getTotalPrice()===0?'disabled style="opacity:0.55;filter:grayscale(1);cursor:not-allowed;"':''}>
          –û—Ñ–æ—Ä–º–∏—Ç—å QR-–±–∏–ª–µ—Ç—ã
        </button>
        <button class="gta-btn fadein" style="margin-top:0.8em;width:100%;background:#23232b;color:#ffe600;border:2px solid #ffe600;" onclick="renderGenderSelect()">‚Üê –ù–∞–∑–∞–¥</button>
      `;
    }
    function changeTicket(type, delta) {
      tickets[type] += delta;
      if(tickets[type]<0) tickets[type]=0;
      document.getElementById(type+'-count').textContent = tickets[type];
      document.getElementById('total-price').textContent = getTotalPrice()+'$';
      let btn = document.getElementById('to-pay-btn');
      if (getTotalPrice()===0) {
        btn.disabled = true;
        btn.style.opacity = 0.55;
        btn.style.filter = "grayscale(1)";
        btn.style.cursor = "not-allowed";
      } else {
        btn.disabled = false;
        btn.style.opacity = 1;
        btn.style.filter = "none";
        btn.style.cursor = "pointer";
      }
    }
    function getTotalPrice() {
      if (!gender) return 0;
      return tickets.fun * prices[gender].fun + tickets.vip * prices[gender].vip;
    }
    function showSuccess() {
      let msg = '';
      let qrs = '';
      if (tickets.fun > 0) {
        qrs += `<div class="qr-preview"><img class="qr-img" src="https://api.qrserver.com/v1/create-qr-code/?size=170x170&data=FUN-${gender}-${Date.now()}" alt="QR FUN"></div>
        <div style="color:#ffe600;font-family:'Russo One',sans-serif;font-size:1.08em;margin-bottom:1em;">FUN x${tickets.fun}</div>`;
      }
      if (tickets.vip > 0) {
        qrs += `<div class="qr-preview"><img class="qr-img" src="https://api.qrserver.com/v1/create-qr-code/?size=170x170&data=VIP-${gender}-${Date.now()}" alt="QR VIP"></div>
        <div style="color:#ffe600;font-family:'Russo One',sans-serif;font-size:1.08em;margin-bottom:1em;">VIP x${tickets.vip}</div>`;
      }
      msg = `
        <div class="success-msg fadein">–í–∞—à–∏ QR –±–∏–ª–µ—Ç—ã</div>
        ${qrs}
        <div style="margin-top:1.4em;">
          <button class="buy-btn" onclick="renderGenderSelect()">–ö—É–ø–∏—Ç—å –µ—â–µ</button>
        </div>
      `;
      document.getElementById('main-step').innerHTML = msg;
    }

    // Initial render
    renderGenderSelect();

    // For mobile: scroll to form on reload
    window.onload = () => {
      setTimeout(()=>{ 
        document.getElementById('main-step').scrollIntoView({behavior: "smooth", block: "start"});
      }, 80);
    };
    // Prevent form submit
    document.addEventListener('submit', e=>e.preventDefault());
  </script>
</body>
</html>
