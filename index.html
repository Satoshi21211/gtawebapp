<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>DIOR RPG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background: #181824; color: #fff; font-family: 'Montserrat', Arial, sans-serif; margin: 0; padding: 0; }
    .game-box { max-width: 400px; margin: 40px auto; background: #23233a; border-radius: 16px; box-shadow: 0 4px 20px #0008; padding: 24px 18px 28px 18px; }
    .title { font-size: 1.44em; font-weight: bold; letter-spacing: 2px; margin-bottom: 1em; text-align: center; }
    .row { margin-bottom: 0.7em; display: flex; justify-content: space-between; align-items: center; }
    .label { color: #b7b8e7; font-weight: 500; }
    .val, .edit-input { background: #2d2d45; color: #fff; border: 1px solid #393963; border-radius: 8px; padding: 4px 9px; min-width: 60px; text-align: right; font-size: 1.08em;}
    .val[contenteditable="true"] { outline: 2px solid #e9457a; }
    .stat-btn { margin-left: 7px; padding: 2px 9px; font-size: 1.05em; background: #e9457a; color: #fff; border: none; border-radius: 7px; cursor: pointer; }
    .stat-btn:active { background: #af2654; }
    .section-title { color: #e9457a; font-size: 1.16em; font-weight: 700; margin: 1em 0 0.4em 0; }
    .quests, .missions, .progress { margin: 1em 0 1em 0; }
    .quest, .mission { margin-bottom: 0.67em; background: #1c1c32; border-radius: 8px; padding: 7px 10px 7px 10px; display: flex; align-items: center; justify-content: space-between;}
    .quest.done, .mission.done { opacity: 0.5; text-decoration: line-through; }
    .quest-title, .mission-title { flex: 1 1 auto; }
    .complete-btn { margin-left: 10px; padding: 2px 8px; font-size: 0.94em; background: #b7b8e7; color: #23233a; border: none; border-radius: 6px; cursor: pointer; }
    .complete-btn:active { background: #e9457a; color: #fff; }
    .stat-row { display: flex; align-items: center; margin-bottom: 0.5em;}
    .stat-row label { flex: 1; }
    .stat-num { width: 50px; margin-left: 7px; }
    .divider { border-bottom: 1px solid #2c2c44; margin: 1.2em 0; }
  </style>
</head>
<body>
  <div class="game-box">
    <div class="title">DIOR || –£–†–û–í–ï–ù–¨: <span id="level">1</span> || EXP: <span id="exp">0</span>/<span id="expMax">8</span></div>
    <div class="row"><span class="label">–õ–û–ö–ê–¶–ò–Ø:</span><span class="val" contenteditable="true" id="location">USA, LA</span></div>
    <div class="row"><span class="label">PASS:</span><span class="val" contenteditable="true" id="pass">NO LEGAL</span></div>
    <div class="row"><span class="label">–†–ê–ë–û–¢–ê:</span><span class="val" contenteditable="true" id="job">–ù–ï–¢–£</span></div>
    <div class="row"><span class="label">–†–ï–ü–£–¢–ê–¶–ò–Ø:</span>
      <span class="val" id="rep">0</span>
      <button class="stat-btn" onclick="addRep(1)">+1</button>
      <button class="stat-btn" onclick="addRep(-1)">-1</button>
    </div>
    <div class="row"><span class="label">–î–ï–ù–¨–ì–ò:</span><span class="val" contenteditable="true" id="money">0$</span></div>
    <div class="row"><span class="label">CRYPTO:</span><span class="val" contenteditable="true" id="crypto">0$</span></div>

    <div class="divider"></div>
    <div class="row"><span class="label">–ü–†–û–ô–î–ï–ù–û –ö–í–ï–°–¢–û–í:</span><span class="val" id="questsDone">0</span></div>
    <div class="row"><span class="label">–ü–†–û–ô–î–ï–ù–û –ú–ò–°–ò–ô:</span><span class="val" id="missionsDone">0</span></div>
    <div class="divider"></div>

    <div class="section-title">–°–î–ï–õ–ê–ù–û –û–¢–ñ–ò–ú–ê–ù–ò–Ø:</div>
    <div class="stat-row"><label>–û—Ç–∂–∏–º–∞–Ω–∏—è</label><input class="stat-num" type="number" id="pushups" min="0" value="0"></div>
    <div class="section-title">–°–î–ï–õ–ê–ù–û –ü–†–ï–°–°–ê:</div>
    <div class="stat-row"><label>–ü—Ä–µ—Å—Å</label><input class="stat-num" type="number" id="abs" min="0" value="0"></div>

    <div class="section-title">–ö–í–ï–°–¢–´</div>
    <div class="quests" id="quests"></div>
    <div class="section-title">üß† –ü–†–û–ö–ê–ß–ê–¢–¨ –ê–ö–ö–ê–£–ù–¢</div>
    <div class="progress" id="progress"></div>
    <div class="section-title">ü™´üîã –ú–ò–°–ò–ò</div>
    <div class="missions" id="missions"></div>
  </div>

  <script>
    // –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
    let state = {
      level: 1,
      exp: 0,
      expMax: 8,
      rep: 0,
      questsDone: 0,
      missionsDone: 0,
      quests: [
        { text: "–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å 200$ [+1 EXP]", exp: 1, done: false },
        { text: "–ì–∏–≥–∏–µ–Ω–∞ 30 –¥–Ω–µ–π [+1 EXP]", exp: 1, done: false },
        { text: "–ù–µ –∫—É—Ä–∏—Ç—å 7 –¥–Ω–µ–π [+2 EXP]", exp: 2, done: false },
        { text: "–°–¥–∞—Ç—å –Ω–∞ –ø—Ä–∞–≤–∞ [+3 EXP]", exp: 3, done: false },
        { text: "–û—Ç–ª–æ–∂–∏—Ç—å 1000$ [+3 EXP]", exp: 3, done: false },
        { text: "–ó–∞–Ω—è—Ç—å—Å—è –∑—É–±–∞–º–∏ [+5 EXP]", exp: 5, done: false },
        { text: "–ü–æ–ª—É—á–∏—Ç—å –º–∞—à–∏–Ω—É [+5 EXP]", exp: 5, done: false },
        { text: "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–±–æ—Ç—É [+5 EXP]", exp: 5, done: false },
        { text: "–í—ã–ø–ª–∞—Ç–∏—Ç—å –∫—Ä–µ–¥–∏—Ç [+5 EXP]", exp: 5, done: false },
        { text: "–ù–∞–±—Ä–∞—Ç—å —Å–ª–µ–≥–∫–∞ –≤–µ—Å [+5 EXP]", exp: 5, done: false },
      ],
      progress: [
        { text: "–ü—Ä–æ–≥—É–ª–∫–∞ –¥–∞–ª–µ–∫–æ –æ—Ç –¥–æ–º–∞ [+2 EXP]", exp: 2, done: false },
        { text: "–ö–∞–∂–¥–∞—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–∞—è –∫–Ω–∏–≥–∞ [+3 EXP]", exp: 3, done: false },
        { text: "–ö–∞–∂–¥—ã–π —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å [+2 EXP]", exp: 2, done: false },
      ],
      missions: [
        { text: "–ù–∞—á–Ω–µ–º –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ, Mr.DIOR<br><small>–í—ã–ø–æ–ª–Ω–∏: 3 –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∫–≤–µ—Å—Ç–∞ [+1 REP]</small>", rep: 1, needQuests: 3, done: false, type: "quests" },
        { text: "–ù–µ –ø–æ—Ä–∞ –±—ã –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å?<br><small>–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç –≤ —Ä–∞–±–æ—Ç—É, –∏ –ø–æ –º–∏–º–æ –∑–∞—Ä–∞–±–æ—Ç–∞–π –ø–µ—Ä–≤—ã–µ 200$ [+1 REP]</small>", rep: 1, done: false, type: "custom" },
        { text: "–¢—ã –≤ –¥–µ–ª–µ! –ü–æ–µ—Ö–∞–ª–∏ —É–∂–µ‚Ä¶<br><small>–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–¥–∞—Ç—å –Ω–∞ –≤–æ–¥. –ø—Ä–∞–≤–∞ [+üîë]</small>", rep: 0, done: false, type: "custom" },
        { text: "–õ–µ–≥–∞–ª—å–Ω–æ—Å—Ç—å –º–æ–µ –≤—Ç–æ—Ä–æ–µ –∏–º—è.<br><small>–ù–∞–π—Ç–∏ –ª–µ–≥–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –∑–∞ –∫—ç—à</small>", rep: 0, done: false, type: "custom" },
      ]
    };

    function render() {
      document.getElementById('level').textContent = state.level;
      document.getElementById('exp').textContent = state.exp;
      document.getElementById('expMax').textContent = state.expMax;
      document.getElementById('rep').textContent = state.rep;
      document.getElementById('questsDone').textContent = state.questsDone;
      document.getElementById('missionsDone').textContent = state.missionsDone;

      // –ö–≤–µ—Å—Ç—ã
      let qHtml = '';
      state.quests.forEach((q, i) => {
        qHtml += `<div class="quest${q.done ? ' done' : ''}">
          <span class="quest-title">${q.text}</span>
          ${!q.done ? `<button class="complete-btn" onclick="completeQuest(${i})">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>` : ''}
        </div>`;
      });
      document.getElementById('quests').innerHTML = qHtml;

      // –ü—Ä–æ–∫–∞—á–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞
      let pHtml = '';
      state.progress.forEach((p, i) => {
        pHtml += `<div class="quest${p.done ? ' done' : ''}">
          <span class="quest-title">${p.text}</span>
          ${!p.done ? `<button class="complete-btn" onclick="completeProgress(${i})">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>` : ''}
        </div>`;
      });
      document.getElementById('progress').innerHTML = pHtml;

      // –ú–∏—Å—Å–∏–∏
      let mHtml = '';
      state.missions.forEach((m, i) => {
        mHtml += `<div class="mission${m.done ? ' done' : ''}">
          <span class="mission-title">${m.text}</span>
          ${!m.done ? `<button class="complete-btn" onclick="completeMission(${i})">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>` : ''}
        </div>`;
      });
      document.getElementById('missions').innerHTML = mHtml;
    }

    // –ö–≤–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω
    window.completeQuest = function(i) {
      if (state.quests[i].done) return;
      state.quests[i].done = true;
      state.questsDone++;
      addExp(state.quests[i].exp);
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–∏—Å—Å–∏—é "3 –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∫–≤–µ—Å—Ç–∞"
      if (!state.missions[0].done && state.questsDone >= state.missions[0].needQuests) {
        addRep(state.missions[0].rep);
        state.missions[0].done = true;
        state.missionsDone++;
      }
      render();
    };

    // –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω
    window.completeProgress = function(i) {
      if (state.progress[i].done) return;
      state.progress[i].done = true;
      addExp(state.progress[i].exp);
      render();
    };

    // –ú–∏—Å—Å–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
    window.completeMission = function(i) {
      if (state.missions[i].done) return;
      state.missions[i].done = true;
      if (state.missions[i].rep) addRep(state.missions[i].rep);
      state.missionsDone++;
      render();
    };

    // –î–æ–±–∞–≤–∏—Ç—å EXP –∏ –∞–ø–Ω—É—Ç—å —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    function addExp(amount) {
      state.exp += amount;
      while (state.exp >= state.expMax) {
        state.exp -= state.expMax;
        state.level++;
        state.expMax = Math.floor(state.expMax * 1.4 + 2);
      }
      render();
    }

    // –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é
    window.addRep = function(amount) {
      state.rep += amount;
      if (state.rep < 0) state.rep = 0;
      render();
    };

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ pushups/abs
    document.getElementById('pushups').addEventListener('change', function() {
      localStorage.setItem('pushups', this.value);
    });
    document.getElementById('abs').addEventListener('change', function() {
      localStorage.setItem('abs', this.value);
    });
    document.getElementById('pushups').value = localStorage.getItem('pushups') || 0;
    document.getElementById('abs').value = localStorage.getItem('abs') || 0;

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–¥–µ–Ω—å–≥–∏, –∫—Ä–∏–ø—Ç–æ, –ª–æ–∫–∞—Ü–∏—è –∏ —Ç.–ø.)
    document.querySelectorAll('[contenteditable="true"]').forEach(el => {
      el.addEventListener('input', () => {
        localStorage.setItem(el.id, el.textContent);
      });
      let saved = localStorage.getItem(el.id);
      if (saved !== null) el.textContent = saved;
    });

    // –†–µ–Ω–¥–µ—Ä –Ω–∞ —Å—Ç–∞—Ä—Ç–µ
    render();
  </script>
</body>
</html>
